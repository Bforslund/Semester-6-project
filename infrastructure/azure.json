{
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "servers_semester6_bea_name": {
            "defaultValue": "semester6-bea",
            "type": "String"
        },
        "vaults_application_secrets_name": {
            "defaultValue": "application-secrets",
            "type": "String"
        },
        "flexibleServers_hoteldatabase_name": {
            "defaultValue": "hoteldatabase",
            "type": "String"
        },
        "flexibleServers_bookingdatabase_name": {
            "defaultValue": "bookingdatabase",
            "type": "String"
        },
        "storageAccounts_sqlva7cmuojhxdcy7o_name": {
            "defaultValue": "sqlva7cmuojhxdcy7o",
            "type": "String"
        },
        "managedClusters_semester_6_bea_aks_name": {
            "defaultValue": "semester-6-bea-aks",
            "type": "String"
        },
        "workspaces_defaultworkspace_b3ebf5e0_2c97_4b6a_9f0d_0d4f5bdcdd51_dewc_externalid": {
            "defaultValue": "/subscriptions/b3ebf5e0-2c97-4b6a-9f0d-0d4f5bdcdd51/resourceGroups/defaultresourcegroup-dewc/providers/microsoft.operationalinsights/workspaces/defaultworkspace-b3ebf5e0-2c97-4b6a-9f0d-0d4f5bdcdd51-dewc",
            "type": "String"
        },
        "publicIPAddresses_baa760ff_d9eb_457a_b176_66e17cd4b826_externalid": {
            "defaultValue": "/subscriptions/b3ebf5e0-2c97-4b6a-9f0d-0d4f5bdcdd51/resourceGroups/MC_semester6-bea_semester-6-bea-aks_germanywestcentral/providers/Microsoft.Network/publicIPAddresses/baa760ff-d9eb-457a-b176-66e17cd4b826",
            "type": "String"
        },
        "userAssignedIdentities_semester_6_bea_aks_agentpool_externalid": {
            "defaultValue": "/subscriptions/b3ebf5e0-2c97-4b6a-9f0d-0d4f5bdcdd51/resourceGroups/MC_semester6-bea_semester-6-bea-aks_germanywestcentral/providers/Microsoft.ManagedIdentity/userAssignedIdentities/semester-6-bea-aks-agentpool",
            "type": "String"
        }
    },
    "variables": {},
    "resources": [
        {
            "type": "Microsoft.ContainerService/managedClusters",
            "apiVersion": "2022-04-02-preview",
            "name": "[parameters('managedClusters_semester_6_bea_aks_name')]",
            "location": "germanywestcentral",
            "sku": {
                "name": "Basic",
                "tier": "Free"
            },
            "identity": {
                "type": "SystemAssigned"
            },
            "properties": {
                "kubernetesVersion": "1.23.5",
                "dnsPrefix": "[concat(parameters('managedClusters_semester_6_bea_aks_name'), '-dns')]",
                "agentPoolProfiles": [
                    {
                        "name": "agentpool",
                        "count": 2,
                        "vmSize": "Standard_F2s_v2",
                        "osDiskSizeGB": 128,
                        "osDiskType": "Managed",
                        "kubeletDiskType": "OS",
                        "maxPods": 110,
                        "type": "VirtualMachineScaleSets",
                        "maxCount": 2,
                        "minCount": 1,
                        "enableAutoScaling": true,
                        "powerState": {
                            "code": "Running"
                        },
                        "orchestratorVersion": "1.23.5",
                        "currentOrchestratorVersion": "1.23.5",
                        "enableNodePublicIP": false,
                        "mode": "System",
                        "osType": "Linux",
                        "osSKU": "Ubuntu",
                        "enableFIPS": false
                    }
                ],
                "servicePrincipalProfile": {
                    "clientId": "msi"
                },
                "addonProfiles": {
                    "azureKeyvaultSecretsProvider": {
                        "enabled": true
                    },
                    "azurepolicy": {
                        "enabled": true
                    },
                    "httpApplicationRouting": {
                        "enabled": true,
                        "config": {
                            "HTTPApplicationRoutingZoneName": "d28c7b7324414a4cba3b.germanywestcentral.aksapp.io"
                        }
                    },
                    "omsagent": {
                        "enabled": true,
                        "config": {
                            "logAnalyticsWorkspaceResourceID": "[parameters('workspaces_defaultworkspace_b3ebf5e0_2c97_4b6a_9f0d_0d4f5bdcdd51_dewc_externalid')]"
                        }
                    }
                },
                "nodeResourceGroup": "[concat('MC_semester6-bea_', parameters('managedClusters_semester_6_bea_aks_name'), '_germanywestcentral')]",
                "enableRBAC": true,
                "networkProfile": {
                    "networkPlugin": "kubenet",
                    "loadBalancerSku": "Standard",
                    "loadBalancerProfile": {
                        "managedOutboundIPs": {
                            "count": 1
                        },
                        "effectiveOutboundIPs": [
                            {
                                "id": "[parameters('publicIPAddresses_baa760ff_d9eb_457a_b176_66e17cd4b826_externalid')]"
                            }
                        ]
                    },
                    "podCidr": "10.244.0.0/16",
                    "serviceCidr": "10.0.0.0/16",
                    "dnsServiceIP": "10.0.0.10",
                    "dockerBridgeCidr": "172.17.0.1/16",
                    "outboundType": "loadBalancer"
                },
                "identityProfile": {
                    "kubeletidentity": {
                        "resourceId": "[parameters('userAssignedIdentities_semester_6_bea_aks_agentpool_externalid')]",
                        "clientId": "bcb07754-7c99-4952-868e-e129d54da712",
                        "objectId": "4ca869bb-7fab-493d-a2f0-deba5f0dd211"
                    }
                },
                "autoScalerProfile": {
                    "balance-similar-node-groups": "false",
                    "expander": "random",
                    "max-empty-bulk-delete": "10",
                    "max-graceful-termination-sec": "600",
                    "max-node-provision-time": "15m",
                    "max-total-unready-percentage": "45",
                    "new-pod-scale-up-delay": "0s",
                    "ok-total-unready-count": "3",
                    "scale-down-delay-after-add": "10m",
                    "scale-down-delay-after-delete": "10s",
                    "scale-down-delay-after-failure": "3m",
                    "scale-down-unneeded-time": "10m",
                    "scale-down-unready-time": "20m",
                    "scale-down-utilization-threshold": "0.5",
                    "scan-interval": "10s",
                    "skip-nodes-with-local-storage": "false",
                    "skip-nodes-with-system-pods": "true"
                },
                "securityProfile": {
                    "azureDefender": {
                        "enabled": true,
                        "logAnalyticsWorkspaceResourceId": "[parameters('workspaces_defaultworkspace_b3ebf5e0_2c97_4b6a_9f0d_0d4f5bdcdd51_dewc_externalid')]"
                    }
                },
                "storageProfile": {
                    "diskCSIDriver": {
                        "enabled": true,
                        "version": "v1"
                    },
                    "fileCSIDriver": {
                        "enabled": true
                    },
                    "snapshotController": {
                        "enabled": true
                    }
                },
                "oidcIssuerProfile": {
                    "enabled": false
                }
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers",
            "apiVersion": "2021-05-01",
            "name": "[parameters('flexibleServers_bookingdatabase_name')]",
            "location": "Sweden Central",
            "sku": {
                "name": "Standard_B2s",
                "tier": "Burstable"
            },
            "properties": {
                "administratorLogin": "adminbea",
                "storage": {
                    "storageSizeGB": 20,
                    "iops": 1280,
                    "autoGrow": "Enabled"
                },
                "version": "5.7",
                "availabilityZone": "1",
                "maintenanceWindow": {
                    "customWindow": "Disabled",
                    "dayOfWeek": 0,
                    "startHour": 0,
                    "startMinute": 0
                },
                "replicationRole": "None",
                "network": {},
                "backup": {
                    "backupRetentionDays": 7,
                    "geoRedundantBackup": "Disabled"
                },
                "highAvailability": {
                    "mode": "Disabled"
                }
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers",
            "apiVersion": "2021-05-01",
            "name": "[parameters('flexibleServers_hoteldatabase_name')]",
            "location": "Sweden Central",
            "sku": {
                "name": "Standard_B1ms",
                "tier": "Burstable"
            },
            "properties": {
                "administratorLogin": "adminbea",
                "storage": {
                    "storageSizeGB": 20,
                    "iops": 360,
                    "autoGrow": "Enabled"
                },
                "version": "5.7",
                "availabilityZone": "1",
                "maintenanceWindow": {
                    "customWindow": "Disabled",
                    "dayOfWeek": 0,
                    "startHour": 0,
                    "startMinute": 0
                },
                "replicationRole": "None",
                "network": {},
                "backup": {
                    "backupRetentionDays": 7,
                    "geoRedundantBackup": "Disabled"
                },
                "highAvailability": {
                    "mode": "Disabled"
                }
            }
        },
        {
            "type": "Microsoft.KeyVault/vaults",
            "apiVersion": "2021-11-01-preview",
            "name": "[parameters('vaults_application_secrets_name')]",
            "location": "northeurope",
            "properties": {
                "sku": {
                    "family": "A",
                    "name": "Standard"
                },
                "tenantId": "c66b6765-b794-4a2b-84ed-845b341c086a",
                "accessPolicies": [
                    {
                        "tenantId": "c66b6765-b794-4a2b-84ed-845b341c086a",
                        "objectId": "c22b7a3b-0c1a-4bc8-baa3-c3c02c4f28eb",
                        "permissions": {
                            "keys": [
                                "Get",
                                "List",
                                "Update",
                                "Create",
                                "Import",
                                "Delete",
                                "Recover",
                                "Backup",
                                "Restore",
                                "Decrypt",
                                "Encrypt",
                                "UnwrapKey",
                                "WrapKey",
                                "Verify",
                                "Sign",
                                "Purge",
                                "Release",
                                "Rotate",
                                "GetRotationPolicy",
                                "SetRotationPolicy"
                            ],
                            "secrets": [
                                "Get",
                                "List",
                                "Set",
                                "Delete",
                                "Recover",
                                "Backup",
                                "Restore",
                                "Purge"
                            ],
                            "certificates": [
                                "Get",
                                "List",
                                "Update",
                                "Create",
                                "Import",
                                "Delete",
                                "Recover",
                                "Backup",
                                "Restore",
                                "ManageContacts",
                                "ManageIssuers",
                                "GetIssuers",
                                "ListIssuers",
                                "SetIssuers",
                                "DeleteIssuers",
                                "Purge"
                            ]
                        }
                    },
                    {
                        "tenantId": "c66b6765-b794-4a2b-84ed-845b341c086a",
                        "objectId": "f19cbec1-584f-4ae3-8687-5f41cbb0af70",
                        "permissions": {
                            "keys": [
                                "Get",
                                "List",
                                "Update",
                                "Create",
                                "Import",
                                "Delete",
                                "Recover",
                                "Backup",
                                "Restore",
                                "GetRotationPolicy",
                                "SetRotationPolicy",
                                "Rotate",
                                "Release",
                                "Purge",
                                "Sign",
                                "Verify",
                                "WrapKey",
                                "UnwrapKey",
                                "Encrypt",
                                "Decrypt"
                            ],
                            "secrets": [
                                "Get",
                                "List",
                                "Set",
                                "Delete",
                                "Recover",
                                "Backup",
                                "Restore",
                                "Purge"
                            ],
                            "certificates": [
                                "Get",
                                "List",
                                "Update",
                                "Create",
                                "Import",
                                "Delete",
                                "Recover",
                                "Backup",
                                "Restore",
                                "ManageContacts",
                                "ManageIssuers",
                                "GetIssuers",
                                "ListIssuers",
                                "SetIssuers",
                                "DeleteIssuers",
                                "Purge"
                            ]
                        }
                    }
                ],
                "enabledForDeployment": true,
                "enabledForDiskEncryption": true,
                "enabledForTemplateDeployment": true,
                "enableSoftDelete": true,
                "softDeleteRetentionInDays": 90,
                "enableRbacAuthorization": false,
                "vaultUri": "[concat('https://', parameters('vaults_application_secrets_name'), '.vault.azure.net/')]",
                "provisioningState": "Succeeded",
                "publicNetworkAccess": "Enabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers",
            "apiVersion": "2021-11-01-preview",
            "name": "[parameters('servers_semester6_bea_name')]",
            "location": "swedencentral",
            "kind": "v12.0",
            "identity": {
                "type": "SystemAssigned"
            },
            "properties": {
                "administratorLogin": "beasdb",
                "version": "12.0",
                "minimalTlsVersion": "1.2",
                "publicNetworkAccess": "Enabled",
                "restrictOutboundNetworkAccess": "Disabled"
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts",
            "apiVersion": "2021-09-01",
            "name": "[parameters('storageAccounts_sqlva7cmuojhxdcy7o_name')]",
            "location": "swedencentral",
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "kind": "StorageV2",
            "properties": {
                "minimumTlsVersion": "TLS1_2",
                "allowBlobPublicAccess": false,
                "networkAcls": {
                    "bypass": "AzureServices",
                    "virtualNetworkRules": [],
                    "ipRules": [],
                    "defaultAction": "Allow"
                },
                "supportsHttpsTrafficOnly": true,
                "encryption": {
                    "services": {
                        "file": {
                            "keyType": "Account",
                            "enabled": true
                        },
                        "blob": {
                            "keyType": "Account",
                            "enabled": true
                        }
                    },
                    "keySource": "Microsoft.Storage"
                },
                "accessTier": "Hot"
            }
        },
        {
            "type": "Microsoft.ContainerService/managedClusters/agentPools",
            "apiVersion": "2022-04-02-preview",
            "name": "[concat(parameters('managedClusters_semester_6_bea_aks_name'), '/agentpool')]",
            "dependsOn": [
                "[resourceId('Microsoft.ContainerService/managedClusters', parameters('managedClusters_semester_6_bea_aks_name'))]"
            ],
            "properties": {
                "count": 2,
                "vmSize": "Standard_F2s_v2",
                "osDiskSizeGB": 128,
                "osDiskType": "Managed",
                "kubeletDiskType": "OS",
                "maxPods": 110,
                "type": "VirtualMachineScaleSets",
                "maxCount": 2,
                "minCount": 1,
                "enableAutoScaling": true,
                "powerState": {
                    "code": "Running"
                },
                "orchestratorVersion": "1.23.5",
                "currentOrchestratorVersion": "1.23.5",
                "enableNodePublicIP": false,
                "mode": "System",
                "osType": "Linux",
                "osSKU": "Ubuntu",
                "enableFIPS": false
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_bookingdatabase_name'), '/', parameters('flexibleServers_bookingdatabase_name'))]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_bookingdatabase_name'))]"
            ],
            "properties": {
                "charset": "latin1",
                "collation": "latin1_swedish_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_hoteldatabase_name'), '/', parameters('flexibleServers_hoteldatabase_name'))]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_hoteldatabase_name'))]"
            ],
            "properties": {
                "charset": "latin1",
                "collation": "latin1_swedish_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_bookingdatabase_name'), '/information_schema')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_bookingdatabase_name'))]"
            ],
            "properties": {
                "charset": "utf8",
                "collation": "utf8_general_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_hoteldatabase_name'), '/information_schema')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_hoteldatabase_name'))]"
            ],
            "properties": {
                "charset": "utf8",
                "collation": "utf8_general_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_bookingdatabase_name'), '/mysql')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_bookingdatabase_name'))]"
            ],
            "properties": {
                "charset": "latin1",
                "collation": "latin1_swedish_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_hoteldatabase_name'), '/mysql')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_hoteldatabase_name'))]"
            ],
            "properties": {
                "charset": "latin1",
                "collation": "latin1_swedish_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_bookingdatabase_name'), '/performance_schema')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_bookingdatabase_name'))]"
            ],
            "properties": {
                "charset": "utf8",
                "collation": "utf8_general_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_hoteldatabase_name'), '/performance_schema')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_hoteldatabase_name'))]"
            ],
            "properties": {
                "charset": "utf8",
                "collation": "utf8_general_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_bookingdatabase_name'), '/sys')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_bookingdatabase_name'))]"
            ],
            "properties": {
                "charset": "utf8",
                "collation": "utf8_general_ci"
            }
        },
        {
            "type": "Microsoft.DBforMySQL/flexibleServers/databases",
            "apiVersion": "2021-05-01",
            "name": "[concat(parameters('flexibleServers_hoteldatabase_name'), '/sys')]",
            "dependsOn": [
                "[resourceId('Microsoft.DBforMySQL/flexibleServers', parameters('flexibleServers_hoteldatabase_name'))]"
            ],
            "properties": {
                "charset": "utf8",
                "collation": "utf8_general_ci"
            }
        },
        {
            "type": "Microsoft.KeyVault/vaults/secrets",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('vaults_application_secrets_name'), '/aws3-accesskey')]",
            "location": "northeurope",
            "dependsOn": [
                "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_application_secrets_name'))]"
            ],
            "properties": {
                "attributes": {
                    "enabled": true
                }
            }
        },
        {
            "type": "Microsoft.KeyVault/vaults/secrets",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('vaults_application_secrets_name'), '/aws3-secretkey')]",
            "location": "northeurope",
            "dependsOn": [
                "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_application_secrets_name'))]"
            ],
            "properties": {
                "attributes": {
                    "enabled": true
                }
            }
        },
        {
            "type": "Microsoft.KeyVault/vaults/secrets",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('vaults_application_secrets_name'), '/bookingDB--DefaultConnection')]",
            "location": "northeurope",
            "dependsOn": [
                "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_application_secrets_name'))]"
            ],
            "properties": {
                "attributes": {
                    "enabled": true
                }
            }
        },
        {
            "type": "Microsoft.KeyVault/vaults/secrets",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('vaults_application_secrets_name'), '/hotelDB--DefaultConnection')]",
            "location": "northeurope",
            "dependsOn": [
                "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_application_secrets_name'))]"
            ],
            "properties": {
                "attributes": {
                    "enabled": true
                }
            }
        },
        {
            "type": "Microsoft.KeyVault/vaults/secrets",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('vaults_application_secrets_name'), '/jwt-token')]",
            "location": "northeurope",
            "dependsOn": [
                "[resourceId('Microsoft.KeyVault/vaults', parameters('vaults_application_secrets_name'))]"
            ],
            "properties": {
                "attributes": {
                    "enabled": true
                }
            }
        },
        {
            "type": "Microsoft.Sql/servers/advancedThreatProtectionSettings",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "state": "Enabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/CreateIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/DbParameterization')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/DefragmentIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/DropIndex')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/advisors",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/ForceLastGoodPlan')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "autoExecuteValue": "Enabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/auditingPolicies",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/Default')]",
            "location": "Sweden Central",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "auditingState": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/auditingSettings",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "auditActionsAndGroups": [],
                "isStorageSecondaryKeyInUse": false,
                "isAzureMonitorTargetEnabled": false,
                "isManagedIdentityInUse": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/connectionPolicies",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/default')]",
            "location": "swedencentral",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "connectionType": "Default"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/advancedThreatProtectionSettings",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/auditingPolicies",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Default')]",
            "location": "Sweden Central",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "auditingState": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/auditingSettings",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "isAzureMonitorTargetEnabled": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/extendedAuditingSettings",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "isAzureMonitorTargetEnabled": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/geoBackupPolicies",
            "apiVersion": "2014-04-01",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Default')]",
            "location": "Sweden Central",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "state": "Enabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/ledgerDigestUploads",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {}
        },
        {
            "type": "Microsoft.Sql/servers/databases/securityAlertPolicies",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "state": "Disabled",
                "disabledAlerts": [
                    ""
                ],
                "emailAddresses": [
                    ""
                ],
                "emailAccountAdmins": false,
                "retentionDays": 0
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/transparentDataEncryption",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "state": "Disabled"
            }
        },
        {
            "type": "Microsoft.Sql/servers/databases/vulnerabilityAssessments",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/master/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "recurringScans": {
                    "isEnabled": false,
                    "emailSubscriptionAdmins": true
                }
            }
        },
        {
            "type": "Microsoft.Sql/servers/devOpsAuditingSettings",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "isAzureMonitorTargetEnabled": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/encryptionProtector",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/current')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "kind": "servicemanaged",
            "properties": {
                "serverKeyName": "ServiceManaged",
                "serverKeyType": "ServiceManaged",
                "autoRotationEnabled": false
            }
        },
        {
            "type": "Microsoft.Sql/servers/extendedAuditingSettings",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "retentionDays": 0,
                "auditActionsAndGroups": [],
                "isStorageSecondaryKeyInUse": false,
                "isAzureMonitorTargetEnabled": false,
                "isManagedIdentityInUse": false,
                "state": "Disabled",
                "storageAccountSubscriptionId": "00000000-0000-0000-0000-000000000000"
            }
        },
        {
            "type": "Microsoft.Sql/servers/firewallRules",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/AllowAllWindowsAzureIps')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ]
        },
        {
            "type": "Microsoft.Sql/servers/firewallRules",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/ClientIp-2022-4-21_14-18-11')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ]
        },
        {
            "type": "Microsoft.Sql/servers/keys",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/ServiceManaged')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "kind": "servicemanaged",
            "properties": {
                "serverKeyType": "ServiceManaged"
            }
        },
        {
            "type": "Microsoft.Sql/servers/securityAlertPolicies",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]"
            ],
            "properties": {
                "state": "Enabled",
                "disabledAlerts": [
                    ""
                ],
                "emailAddresses": [
                    ""
                ],
                "emailAccountAdmins": false,
                "retentionDays": 0
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/blobServices",
            "apiVersion": "2021-09-01",
            "name": "[concat(parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "cors": {
                    "corsRules": []
                },
                "deleteRetentionPolicy": {
                    "allowPermanentDelete": false,
                    "enabled": false
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/fileServices",
            "apiVersion": "2021-09-01",
            "name": "[concat(parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'))]"
            ],
            "sku": {
                "name": "Standard_LRS",
                "tier": "Standard"
            },
            "properties": {
                "cors": {
                    "corsRules": []
                },
                "shareDeleteRetentionPolicy": {
                    "enabled": true,
                    "days": 7
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/queueServices",
            "apiVersion": "2021-09-01",
            "name": "[concat(parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Storage/storageAccounts/tableServices",
            "apiVersion": "2021-09-01",
            "name": "[concat(parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'), '/default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Storage/storageAccounts', parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'))]"
            ],
            "properties": {
                "cors": {
                    "corsRules": []
                }
            }
        },
        {
            "type": "Microsoft.Sql/servers/vulnerabilityAssessments",
            "apiVersion": "2021-11-01-preview",
            "name": "[concat(parameters('servers_semester6_bea_name'), '/Default')]",
            "dependsOn": [
                "[resourceId('Microsoft.Sql/servers', parameters('servers_semester6_bea_name'))]",
                "[resourceId('Microsoft.Storage/StorageAccounts', parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'))]"
            ],
            "properties": {
                "storageContainerPath": "[concat('https://', parameters('storageAccounts_sqlva7cmuojhxdcy7o_name'), '.blob.core.windows.net/vulnerability-assessment/')]",
                "recurringScans": {
                    "isEnabled": true,
                    "emailSubscriptionAdmins": true,
                    "emails": []
                }
            }
        }
    ]
}